{% extends 'movietut/base.html' %}
{% load static %}
{% load custom_tags %}

{% block content %}

    <section class="section">
        <div class="container is-max-desktop">
            <div class="columns is-multiline is-mobile">
                {% for movie in page_obj %}
                    <div class="column is-one-fourth-tablet is-one-third-mobile is-one-fifth-desktop">
                        <div class="card">
                            <a class="card-image" href="{% url 'movie-detail' movie.pk %}">
                                {% if movie.poster %}
                                    <figure class="image is-3by4">
                                        <img src="{% get_poster_url movie.poster %}"
                                             alt="{{ movie }} poster" class="is-covered">
                                    </figure>
                                {% else %}
                                    <figure class="image is-3by4">
                                        <img src="{% static 'movietut/img/placeholder.svg' %}"
                                             alt="{{ movie }} poster" class="is-covered">
                                    </figure>
                                {% endif %}
                            </a>
                            <div class="card-content">
                                <a class="has-text-weight-bold" href="{% url 'movie-detail' movie.pk %}">
                                    {{ movie.title|truncatechars:42 }}</a>
                                <h4 class="has-text-grey-dark">{{ movie.release_date }}</h4>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

            {% if page_obj.has_other_pages %}
                <div class="pt-6">
                    {% include 'movietut/movie_list/movie_list_pagination.html' %}
                </div>
            {% endif %}
        </div>
    </section>

    <style>
        .card {
            height: 100%;

        }
    </style>

{% endblock %}